!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).evt={})}(this,(function(t){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var i={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isNull:function(t){var e;for(e in t)return!1;return!0},notNull:function(t){return!i.isNull(t)},isArray:function(t){return"array"===i.type(t)},isFunction:function(t){return"function"===i.type(t)},uuid:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}));return e}},n=function(){function t(){this.options={autoExcute:!1},this.queue=[],this.cursor=0,this.add=this.add.bind(this),this.next=this.next.bind(this),this.skip=this.skip.bind(this),this.fire=this.fire.bind(this),this.clear=this.clear.bind(this)}var e=t.prototype;return e.add=function(t,e){var n=this;void 0===e&&(e={});var r=Object.assign(this.options,e).token;switch(i.type(t)){case"function":t.token=r,this.queue.push(t);break;case"array":t.map((function(t){n.add(t)}));break;default:return}return this},e.skip=function(t){for(t=i.isNull(t)?1:+t;t--;)this.queue.shift();return this},e.next=function(){var t=this.options.autoExcute;if(i.notNull(this.queue)){var e=this.queue.shift();this.cursor++;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(null,r),this.queue.push(e),this.cursor<this.queue.length&&t?this.next.apply(this,r):this.cursor=0}},e.fire=function(){return this.cursor=0,this.next.apply(this,arguments)},e.clear=function(){return this.queue=[],this},e.remove=function(t){var e=i.type(t);if(!/function|string|array|undefined/.test(e))return!1;switch(e){case"undefined":this.queue=[];break;case"array":this.queue=this.queue.filter((function(e){return!t.includes(e)&&!t.includes(e.name)&&!t.includes(e.token)}));break;case"function":this.queue=this.queue.filter((function(e){return t!==e}));break;case"string":this.queue=this.queue.filter((function(e){return t!==e.name&&t!==e.token}))}return this},t}(),r=function(){function t(t){this.options={autoExcute:!0},this.stack={},this.cache={},this.add=this.add.bind(this),this.on=this.on.bind(this),this.emit=this.emit.bind(this),this.remove=this.remove.bind(this)}var r=t.prototype;return r.add=function(t,e,i){return void 0===e&&(e=[]),(t=t&&t.add?t:new n).add(e,i),t},r.on=function(t,n,r){if(void 0===t&&(t=""),void 0===n&&(n=[]),void 0===r&&(r={}),!/function|array/.test(i.type(n)))return this;var s;(this.stack[t]||(this.stack[t]={}),this.stack[t].queue=this.add(this.stack[t].queue,n,e({},this.options,{},r)),this.cache[t])&&((s=this.stack[t].queue).fire.apply(s,this.cache[t].params),this.cache[t]={});return this},r.emit=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r;this.stack[t]?(r=this.stack[t].queue).fire.apply(r,i):this.cache[t]={params:i};return this},r.remove=function(t,e){return this.stack[t]&&this.stack[t].queue.remove(e),this},t}();t.FnQueue=n,t.Signal=r,Object.defineProperty(t,"__esModule",{value:!0})}));
