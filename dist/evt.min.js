(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.evt={}))})(this,function(a){'use strict';function b(){return b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},b.apply(this,arguments)}var c={type:function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},isNull:function(a){for(var b in a)return!1;return!0},notNull:function(a){return!c.isNull(a)},isArray:function(a){return"array"===c.type(a)},isFunction:function(a){return"function"===c.type(a)},uuid:function a(){var b=new Date().getTime(),a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=Math.floor,d=0|(b+16*Math.random())%16;return b=c(b/16),("x"==a?d:8|3&d).toString(16)});return a}},d=function(){function a(){this.options={autoExcute:!1},this.queue=[],this.cursor=0,this.add=this.add.bind(this),this.next=this.next.bind(this),this.skip=this.skip.bind(this),this.fire=this.fire.bind(this),this.clear=this.clear.bind(this)}var d=a.prototype;return d.add=function(a,d){var e=this;void 0===d&&(d={});var f=b(this.options,d),g=f.token;switch(c.type(a)){case"function":a.token=g,this.queue.push(a);break;case"array":a.map(function(a){e.add(a)});break;default:return;}return this},d.skip=function(a){for(a=c.isNull(a)?1:+a;a--;)this.queue.shift();return this},d.next=function(){var a=this.options.autoExcute;if(c.notNull(this.queue)){var b=this.queue.shift();this.cursor++;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];b.apply(null,e),this.queue.push(b),this.cursor<this.queue.length&&a?this.next.apply(this,e):this.cursor=0}},d.fire=function(){return this.cursor=0,this.next.apply(this,arguments)},d.clear=function(){return this.queue=[],this},d.remove=function(a){var b=c.type(a);if(!/function|string|array|undefined/.test(b))return!1;switch(b){case"undefined":{this.queue=[];break}case"array":{this.queue=this.queue.filter(function(b){return!a.includes(b)&&!a.includes(b.name)&&!a.includes(b.token)});break}case"function":{this.queue=this.queue.filter(function(b){return a!==b});break}case"string":{this.queue=this.queue.filter(function(b){return a!==b.name&&a!==b.token});break}}return this},a}(),e=function(){function a(){this.options={autoExcute:!0},this.stack={},this.cache={},this.add=this.add.bind(this),this.on=this.on.bind(this),this.emit=this.emit.bind(this),this.remove=this.remove.bind(this)}var e=a.prototype;return e.add=function(a,b,c){return void 0===b&&(b=[]),a=a&&a.add?a:new d,a.add(b,c),a},e.on=function(a,d,e){if(void 0===a&&(a=""),void 0===d&&(d=[]),void 0===e&&(e={}),!/function|array/.test(c.type(d)))return this;if(this.stack[a]||(this.stack[a]={}),this.stack[a].queue=this.add(this.stack[a].queue,d,b({},this.options,e)),this.cache[a]){var f;(f=this.stack[a].queue).fire.apply(f,this.cache[a].params),this.cache[a]={}}return this},e.emit=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(this.stack[a]){var e;(e=this.stack[a].queue).fire.apply(e,c)}else this.cache[a]={params:c};return this},e.remove=function(a,b){return this.stack[a]&&this.stack[a].queue.remove(b),this},a}();a.FnQueue=d,a.Signal=e,Object.defineProperty(a,"__esModule",{value:!0})});
