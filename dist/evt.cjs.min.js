"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0});var utils={type:function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},isNull:function(t){var i;for(i in t)return!1;return!0},notNull:function(t){return!utils.isNull(t)},isArray:function(t){return"array"===utils.type(t)},isFunction:function(t){return"function"===utils.type(t)},uuid:function(){var t=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==i?e:3&e|8).toString(16)}));return i}},FnQueue=function(){function t(){this.options={autoExcute:!1},this.queue=[],this.cursor=0,this.add=this.add.bind(this),this.next=this.next.bind(this),this.skip=this.skip.bind(this),this.fire=this.fire.bind(this),this.clear=this.clear.bind(this)}var i=t.prototype;return i.add=function(t,i){var e=this;void 0===i&&(i={});var n=Object.assign(this.options,i).token;switch(utils.type(t)){case"function":t.token=n,this.queue.push(t);break;case"array":t.map((function(t){e.add(t)}));break;default:return}return this},i.skip=function(t){for(t=utils.isNull(t)?1:+t;t--;)this.queue.shift();return this},i.next=function(){var t=this.options.autoExcute;if(utils.notNull(this.queue)){var i=this.queue.shift();this.cursor++;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];i.apply(null,n),this.queue.push(i),this.cursor<this.queue.length&&t?this.next.apply(this,n):this.cursor=0}},i.fire=function(){return this.cursor=0,this.next.apply(this,arguments)},i.clear=function(){return this.queue=[],this},i.remove=function(t){var i=utils.type(t);if(!/function|string|array|undefined/.test(i))return!1;switch(i){case"undefined":this.queue=[];break;case"array":this.queue=this.queue.filter((function(i){return!t.includes(i)&&!t.includes(i.name)&&!t.includes(i.token)}));break;case"function":this.queue=this.queue.filter((function(i){return t!==i}));break;case"string":this.queue=this.queue.filter((function(i){return t!==i.name&&t!==i.token}))}return this},t}(),Signal=function(){function t(t){this.options={autoExcute:!0},this.stack={},this.cache={},this.add=this.add.bind(this),this.on=this.on.bind(this),this.emit=this.emit.bind(this),this.remove=this.remove.bind(this)}var i=t.prototype;return i.add=function(t,i,e){return void 0===i&&(i=[]),(t=t&&t.add?t:new FnQueue).add(i,e),t},i.on=function(t,i,e){if(void 0===t&&(t=""),void 0===i&&(i=[]),void 0===e&&(e={}),!/function|array/.test(utils.type(i)))return this;var n;(this.stack[t]||(this.stack[t]={}),this.stack[t].queue=this.add(this.stack[t].queue,i,_extends({},this.options,{},e)),this.cache[t])&&((n=this.stack[t].queue).fire.apply(n,this.cache[t].params),this.cache[t]={});return this},i.emit=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];var s;this.stack[t]?(s=this.stack[t].queue).fire.apply(s,e):this.cache[t]={params:e};return this},i.remove=function(t,i){return this.stack[t]&&this.stack[t].queue.remove(i),this},t}();exports.FnQueue=FnQueue,exports.Signal=Signal;
